# Быстрый старт (Docker)

**Требования:** Docker Desktop / Docker Engine, свободные порты `5432` (Postgres) и `8080` (HTTP API)

В докере выставлены дефолтные переменные окружения, поэтому можно запускать проект явно не указывая
их в .env. Однако если вы захотите например поменять пароль от постгреса, дефолтный аднмиский пароль и тд,
то можете написать свой .env. Пример .env.example.

Запуск бд + миграций + приложения 

```bash
docker-compose up -d
```

Сервис будет доступен по адресу:

```
http://localhost:8080
```

# Допущения
1. В /pullRequest/reassign в ситуации когда мы пытаемся 
переназначить ревьюера, который не прикреплен к этому пр, я решил
изменить боди респонса на 

```
{
    "error": {
        "code": "NOT_ASSIGNED",
        "message": "reviewer not assigned"
    }
}
```

вместо 

```
{
  "error": {
    "code": "NOT_FOUND",
    "message": "resource not found"
  }
}
```

так как в документации был энам с ошибками которые могут быть и
там была ошибка NOT_ASSIGNED.

2. В /pullRequest/reassign в ситуации когда мы пытаемся
переназначить ревьюера, но не можем найти ему замену, например в ситуации
когда он один в команде и не на кого переназначать, я добавил
респонс боди 
```
{
    "error": {
        "code": "NO_CANDIDATE",
        "message": "no candidate to reassign"
    }
}
```

так как в документации был энам с ошибками которые могут быть и
там была ошибка NO_CANDIDATE.

3. Также при выборе ревьюера для переназначения решил не включать автора пул реквеста 
в список возможных кандидатов. Так как мне показалось это странным, что автор может ревьюить сам себя

# Реализация
1. Для изменения актиности пользователя был необходим админский токен, поэтому также были реализованы эндпоинты
для логина и регистрации администраторов.

Логин должен иметь тело запроса, а отдает jwt токен. Пример эндпоинта с телом:
```
POST http://localhost:8080/admins/login
{
  "id" : "admin",
  "password" : "admin"
}
```

Пример респонса

```
{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbl9pZCI6ImFkbWluIiwiZXhwIjoxNzYzMzMwODQzfQ._EK_3P74LFS2vW6gmaMMwBRAr1SgxIRrXfBJs2l2zJ0"
}
```

Регистрация должна иметь тело запроса. Пример эндпоинта с телом:
```
POST http://localhost:8080/admins/register
{
  "id" : "misha",
  "password" : "misha"
}

```

При этом регистрировать админов могут только другие админы, то есть надо передавать еще и токен в хэдеры, где ключ
это Authorization, а значение Bearer + токен.
Пример значения: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbl9pZCI6ImFkbWluIiwiZXhwIjoxNzYzMzMwODQzfQ._EK_3P74LFS2vW6gmaMMwBRAr1SgxIRrXfBJs2l2zJ0

2. Также нужно передавать токен в хэдеры еще и в эндпоинте /users/setIsActive.
3. При старте имеется дефолтный админ с айди admin и паролем admin. При этом вы можете задать
дефолтные параметры админа в .env. Пример есть в .env.example.